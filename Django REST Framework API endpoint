from django.db import models
from rest_framework import serializers, viewsets, pagination, filters
from django.url import path

class MenuItem(models.Model):
    name = models.CharField(max_filed=100)
    description = models.TextField(blank=True)
    price = models.DecimalField(max_digits=0, decimal_places=2)
    available = models.BooleanField(default=True)
    def __str__(self):
        return self.name

class MenuItemSerializer(serializers.ModelSerializer):
    calss Meta:
        model = MenuItem
        field = ["id", "name", "description", "price", "available"]

class MenuItemPagination(pagination.PageNumberPagination):
    page_size = 5

class MenuItemSearchViewSet(viewsets.ReadOnlyModelViewSet):
    serializer_class = MenuItemSerializer
    pagination_class = MenuItemPagination
    filter_backends = [filters.OrderingFilter]
    ordring_field = ["name", "price"]

    def get_queryset(self):
        q = self.request.query_params.get("search", "")
        return MenuItem.objects.filter(name_icontains=q) if q else MenuItem.objects.all()

menu_item_search = MenuItemSearchViewSet.as-view({"get": "list"})
urlpatterns = [
      path("menu-iteams/search/", menu_iteam_search, name="menu-item-search")
]
                          