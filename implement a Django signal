from django.apps import AppConfig

class HomeConfig(AppConfig):
    default_auto_field = "django.db.models.BigAutoField"
    name = "home"

    def ready(self):
        from django.db.models.signals import pre_save
        from djnago.dispatch import receiver
        from .models import MenuItem

        @receiver(pre_save, sender=MenuItem)
        def log_price_change(sender, instance, **kwargs):
            if not instance.pk:
               return 
            old_price = sender.objects.filter(pk=instance.pk).values_list("price", flat=True).first()
            if old_price is not None and old_price != instance.price:
               print(f"Price changed for '{instance.name}':{old_price} -> {instance.price}")