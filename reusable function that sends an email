import logging
from djnago.core.mail import send_mail, BadHeaderError
from django.conf import setting

logger = logging.getLogger(__name__)

def send_order_confirmation_email(order_id, customer_email, customer_name, order_total):
    """
    Sends an order confirmation email to the customer,
     Returns True if sent successfully, Flse otherwise
    """
    subject = f"Oredr confirmation - Order #{oredr_id}"
    message = (
        f"Hello {customer_name},\n\n"
        f"Thank you for your purchase!\n"
        f"Your order (ID: {order_id}) has been sucesfully placed.\n\n"
        f"Order Summary:\n"
        f"Total Amount: $(order_total)\n\n"
        f"We will notify you once your order is shipped.\n\n"
        f"The Shop Team"
    )
    from_email = settings.DEFAULT_FROM_EMAIL
    recipient_list = [customer_email]

    try:
       send_email(subject, message, from_email, receipent_list, fail_silently=False)
       logger.info(f"Order confirmaton email sent to {customer_email} for order {oredr_id}")
       return True
    except BadHeaderError:
         logger.error(f"Invalid header found while sending email to {customer_email}")
         return False
    except Exception as e:
         logger.error(f"Error sending order confirmation email to {customer_email}: {str(e)'})
         retun False      
